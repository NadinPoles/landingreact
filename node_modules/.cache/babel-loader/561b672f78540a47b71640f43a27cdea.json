{"ast":null,"code":"import _toConsumableArray from \"/media/nadin/6d0c3e1f-d4db-40f2-ae9a-c32c3cff43d26/\\u0420\\u0430\\u0431\\u043E\\u0442\\u0430/TestReat/13/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/media/nadin/6d0c3e1f-d4db-40f2-ae9a-c32c3cff43d26/\\u0420\\u0430\\u0431\\u043E\\u0442\\u0430/TestReat/13/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport { ADD_TO_CART, REMOVE_FROM_CART, INCREMENT_QUANTITY, DECREMENT_QUANTITY, CLEAR_CART, CLEAR_CARTORDER } from \"./actionTypes\";\nvar initialState = {\n  cart: []\n};\nexport default function cartReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case ADD_TO_CART:\n      var itemInCart = state.cart.find(function (item) {\n        return item.id === action.payload.id;\n      });\n      if (itemInCart) {\n        var tempCart = state.cart.map(function (cartItem) {\n          if (cartItem.id === action.payload.id) {\n            return _objectSpread({}, cartItem, {\n              quantity: cartItem.quantity + 1\n            });\n          } else {\n            return cartItem;\n          }\n        });\n        return _objectSpread({}, state, {\n          cart: tempCart\n        });\n      } else {\n        localStorage.setItem(\"cart\", JSON.stringify([].concat(_toConsumableArray(state.cart), [_objectSpread({}, action.payload, {\n          quantity: 1\n        })])));\n        return _objectSpread({}, state, {\n          cart: [].concat(_toConsumableArray(state.cart), [_objectSpread({}, action.payload, {\n            quantity: 1\n          })])\n        });\n      }\n    case REMOVE_FROM_CART:\n      if (window.confirm(\"Удалить товар?\")) {\n        return _objectSpread({}, state, {\n          cart: _toConsumableArray(state.cart.filter(function (item) {\n            return item.id !== action.payload.id;\n          }))\n        });\n      } else {\n        return state;\n      }\n    case INCREMENT_QUANTITY:\n      var item = state.cart.find(function (item) {\n        return item.id === action.payload.id;\n      });\n      if (item) {\n        item.quantity++;\n        return _objectSpread({}, state, {\n          cart: _toConsumableArray(state.cart)\n        });\n      }\n      return state;\n    case DECREMENT_QUANTITY:\n      var item_decr = state.cart.find(function (item) {\n        return item.id === action.payload.id;\n      });\n      if (item_decr) {\n        if (item_decr.quantity == 1) {\n          item_decr.quantity = 1;\n        } else {\n          item_decr.quantity--;\n        }\n        return _objectSpread({}, state, {\n          cart: _toConsumableArray(state.cart)\n        });\n      }\n      return state;\n    case CLEAR_CART:\n      if (window.confirm(\"Очистить корзину?\")) {\n        localStorage.removeItem(\"cart\");\n        return _objectSpread({}, state, {\n          cart: []\n        });\n      } else {\n        return state;\n      }\n    case CLEAR_CARTORDER:\n      localStorage.removeItem(\"cart\");\n      return _objectSpread({}, state, {\n        cart: []\n      });\n    default:\n      return state;\n  }\n}","map":{"version":3,"names":["ADD_TO_CART","REMOVE_FROM_CART","INCREMENT_QUANTITY","DECREMENT_QUANTITY","CLEAR_CART","CLEAR_CARTORDER","initialState","cart","cartReducer","state","action","type","itemInCart","find","item","id","payload","tempCart","map","cartItem","quantity","localStorage","setItem","JSON","stringify","window","confirm","filter","item_decr","removeItem"],"sources":["/media/nadin/6d0c3e1f-d4db-40f2-ae9a-c32c3cff43d26/Работа/TestReat/13/shop/src/redux/cartReducer.tsx"],"sourcesContent":["import {\n  ADD_TO_CART,\n  REMOVE_FROM_CART,\n  INCREMENT_QUANTITY,\n  DECREMENT_QUANTITY,\n  CLEAR_CART,\n  CLEAR_CARTORDER,\n} from \"./actionTypes\";\nimport { CartState } from \"./types\";\nimport {\n  addToCart,\n  removeFromCart,\n  incrementQuantity,\n  decrementQuantity,\n  clearCart,\n  clearCartOrder,\n} from \"./actions\";\n\nconst initialState: CartState = {\n  cart: [],\n};\n\ntype ProductAction = ReturnType<\n  | typeof addToCart\n  | typeof removeFromCart\n  | typeof incrementQuantity\n  | typeof decrementQuantity\n  | typeof clearCart\n  | typeof clearCartOrder\n>;\n\nexport default function cartReducer(\n  state = initialState,\n  action: ProductAction\n) {\n  switch (action.type) {\n    case ADD_TO_CART:\n      const itemInCart = state.cart.find(\n        (item) => item.id === action.payload.id\n      );\n      if (itemInCart) {\n        const tempCart = state.cart.map((cartItem) => {\n          if (cartItem.id === action.payload.id) {\n            return { ...cartItem, quantity: cartItem.quantity + 1 };\n          } else {\n            return cartItem;\n          }\n        });\n        return { ...state, cart: tempCart };\n      } else {\n        localStorage.setItem(\n          \"cart\",\n          JSON.stringify([...state.cart, { ...action.payload, quantity: 1 }])\n        );\n        return {\n          ...state,\n          cart: [...state.cart, { ...action.payload, quantity: 1 }],\n        };\n      }\n\n    case REMOVE_FROM_CART:\n      if (window.confirm(\"Удалить товар?\")) {\n        return {\n          ...state,\n          cart: [...state.cart.filter((item) => item.id !== action.payload.id)],\n        };\n      } else {\n        return state;\n      }\n    case INCREMENT_QUANTITY:\n      const item = state.cart.find((item) => item.id === action.payload.id);\n      if (item) {\n        item.quantity++;\n        return {\n          ...state,\n          cart: [...state.cart],\n        };\n      }\n      return state;\n    case DECREMENT_QUANTITY:\n      const item_decr = state.cart.find(\n        (item) => item.id === action.payload.id\n      );\n      if (item_decr) {\n        if (item_decr.quantity == 1) {\n          item_decr.quantity = 1;\n        } else {\n          item_decr.quantity--;\n        }\n        return {\n          ...state,\n          cart: [...state.cart],\n        };\n      }\n      return state;\n    case CLEAR_CART:\n      if (window.confirm(\"Очистить корзину?\")) {\n        localStorage.removeItem(\"cart\");\n        return { ...state, cart: [] };\n      } else {\n        return state;\n      }\n    case CLEAR_CARTORDER:\n      localStorage.removeItem(\"cart\");\n      return { ...state, cart: [] };\n    default:\n      return state;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}