{"ast":null,"code":"import _toConsumableArray from \"/media/nadin/6d0c3e1f-d4db-40f2-ae9a-c32c3cff43d26/\\u0420\\u0430\\u0431\\u043E\\u0442\\u0430/TestReat/13/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/media/nadin/6d0c3e1f-d4db-40f2-ae9a-c32c3cff43d26/\\u0420\\u0430\\u0431\\u043E\\u0442\\u0430/TestReat/13/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport { ADD_TO_CART, REMOVE_FROM_CART, INCREMENT_QUANTITY, DECREMENT_QUANTITY, CLEAR_CART, CLEAR_CARTORDER } from \"./actionTypes\";\nfunction typedAction(type, payload) {\n  return {\n    type: type,\n    payload: payload\n  };\n}\nvar initialState = {\n  cart: []\n};\nexport var addToCart = function addToCart(product) {\n  return typedAction(ADD_TO_CART, product);\n};\nexport var removeFromCart = function removeFromCart(product) {\n  return typedAction(REMOVE_FROM_CART, product);\n};\nexport var incrementQuantity = function incrementQuantity(product) {\n  return typedAction(INCREMENT_QUANTITY, product);\n};\nexport var decrementQuantity = function decrementQuantity(product) {\n  return typedAction(DECREMENT_QUANTITY, product);\n};\nexport var clearCart = function clearCart() {\n  return typedAction(CLEAR_CART);\n};\nexport var clearCartOrder = function clearCartOrder() {\n  return typedAction(CLEAR_CARTORDER);\n};\nexport default function cartReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case ADD_TO_CART:\n      var itemInCart = state.cart.find(function (item) {\n        return item.id === action.payload.id;\n      });\n      if (itemInCart) {\n        console.log(_objectSpread({}, itemInCart, {\n          quantity: itemInCart.quantity++\n        }));\n        return {\n          cart: [].concat(_toConsumableArray(state.cart), [_objectSpread({}, itemInCart, {\n            quantity: itemInCart.quantity++\n          })])\n        };\n      } else {\n        return _objectSpread({}, state, {\n          cart: [].concat(_toConsumableArray(state.cart), [_objectSpread({}, action.payload, {\n            quantity: 1\n          })])\n        });\n\n        // localStorage.setItem('token', payload);\n      }\n\n    case REMOVE_FROM_CART:\n      if (window.confirm(\"Удалить товар?\")) {\n        return _objectSpread({}, state.cart.filter(function (item) {\n          return item.id !== action.payload.id;\n        }));\n      } else {\n        return state;\n      }\n    case INCREMENT_QUANTITY:\n      var item = state.cart.find(function (item) {\n        return item.id === action.payload.id;\n      });\n      if (item) {\n        item.quantity++;\n        return _objectSpread({}, state);\n      }\n      return state;\n    case DECREMENT_QUANTITY:\n      var item_decr = state.cart.find(function (item) {\n        return item.id === action.payload.id;\n      });\n      if (item_decr) {\n        if (item_decr.quantity == 1) {\n          item_decr.quantity = 1;\n        } else {\n          item_decr.quantity--;\n        }\n        return _objectSpread({}, state);\n      }\n      return state;\n    case CLEAR_CART:\n      if (window.confirm(\"Очистить корзину?\")) {\n        // localStorage.removeItem('cart');\n        return _objectSpread({}, state, {\n          cart: []\n        });\n      } else {\n        return state;\n      }\n    case CLEAR_CARTORDER:\n      return _objectSpread({}, state, {\n        cart: []\n      });\n    default:\n      return state;\n  }\n}","map":{"version":3,"names":["ADD_TO_CART","REMOVE_FROM_CART","INCREMENT_QUANTITY","DECREMENT_QUANTITY","CLEAR_CART","CLEAR_CARTORDER","typedAction","type","payload","initialState","cart","addToCart","product","removeFromCart","incrementQuantity","decrementQuantity","clearCart","clearCartOrder","cartReducer","state","action","itemInCart","find","item","id","console","log","quantity","window","confirm","filter","item_decr"],"sources":["/media/nadin/6d0c3e1f-d4db-40f2-ae9a-c32c3cff43d26/Работа/TestReat/13/shop/src/redux/cartReducer.tsx"],"sourcesContent":["import {\n  ADD_TO_CART,\n  REMOVE_FROM_CART,\n  INCREMENT_QUANTITY,\n  DECREMENT_QUANTITY,\n  CLEAR_CART,\n  CLEAR_CARTORDER,\n} from \"./actionTypes\";\n\nfunction typedAction(type: string, payload?: any) {\n  return { type, payload };\n}\n\nexport type Product = {\n  id: number;\n  title: string;\n  price: number;\n  slug?: string;\n  image?: string;\n  new?: string;\n  recommend?: string;\n  popular?: string;\n};\n\nexport type CartItem = {\n  id: number;\n  title: string;\n  quantity: number;\n  price: number;\n  image?: string;\n};\n\nexport interface CartState {\n  cart: CartItem[];\n}\n\nconst initialState: CartState = {\n  cart: [],\n};\n\nexport const addToCart = (product: Product) => {\n  return typedAction(ADD_TO_CART, product);\n};\n\nexport const removeFromCart = (product: Product) => {\n  return typedAction(REMOVE_FROM_CART, product);\n};\n\nexport const incrementQuantity = (product: Product) => {\n  return typedAction(INCREMENT_QUANTITY, product);\n};\n\nexport const decrementQuantity = (product: Product) => {\n  return typedAction(DECREMENT_QUANTITY, product);\n};\n\nexport const clearCart = () => {\n  return typedAction(CLEAR_CART);\n};\n\nexport const clearCartOrder = () => {\n  return typedAction(CLEAR_CARTORDER);\n};\n\ntype ProductAction = ReturnType<\n  | typeof addToCart\n  | typeof removeFromCart\n  | typeof incrementQuantity\n  | typeof decrementQuantity\n  | typeof clearCart\n  | typeof clearCartOrder\n>;\n\nexport default function cartReducer(\n  state = initialState,\n  action: ProductAction\n) {\n  switch (action.type) {\n    case ADD_TO_CART:\n      const itemInCart = state.cart.find(\n        (item) => item.id === action.payload.id\n      );\n      if (itemInCart) {\n        console.log({ ...itemInCart, quantity: itemInCart.quantity++ });\n        return {\n          cart: [\n            ...state.cart,\n            { ...itemInCart, quantity: itemInCart.quantity++ },\n          ],\n        };\n      } else {\n        return {\n          ...state,\n          cart: [...state.cart, { ...action.payload, quantity: 1 }],\n        };\n\n        // localStorage.setItem('token', payload);\n      }\n\n    case REMOVE_FROM_CART:\n      if (window.confirm(\"Удалить товар?\")) {\n        return {\n          ...state.cart.filter((item) => item.id !== action.payload.id),\n        };\n      } else {\n        return state;\n      }\n    case INCREMENT_QUANTITY:\n      const item = state.cart.find((item) => item.id === action.payload.id);\n      if (item) {\n        item.quantity++;\n        return { ...state };\n      }\n      return state;\n    case DECREMENT_QUANTITY:\n      const item_decr = state.cart.find(\n        (item) => item.id === action.payload.id\n      );\n      if (item_decr) {\n        if (item_decr.quantity == 1) {\n          item_decr.quantity = 1;\n        } else {\n          item_decr.quantity--;\n        }\n        return { ...state };\n      }\n      return state;\n    case CLEAR_CART:\n      if (window.confirm(\"Очистить корзину?\")) {\n        // localStorage.removeItem('cart');\n        return { ...state, cart: [] };\n      } else {\n        return state;\n      }\n    case CLEAR_CARTORDER:\n      return { ...state, cart: [] };\n    default:\n      return state;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}