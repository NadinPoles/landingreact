{"ast":null,"code":"import _toConsumableArray from \"/media/nadin/6d0c3e1f-d4db-40f2-ae9a-c32c3cff43d26/\\u0420\\u0430\\u0431\\u043E\\u0442\\u0430/TestReat/13/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/media/nadin/6d0c3e1f-d4db-40f2-ae9a-c32c3cff43d26/\\u0420\\u0430\\u0431\\u043E\\u0442\\u0430/TestReat/13/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar intitialState = {\n  items: {\n    allItem: [],\n    loading: true\n  },\n  cart: {\n    cartItems: []\n  }\n};\nvar updateCart = function updateCart(state, idx) {\n  var numCount = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n  var cartItems = state.cart.cartItems;\n  var item = state.items.allItem.find(function (_ref) {\n    var number = _ref.id;\n    return id === idx;\n  });\n  var indxItem = cartItems.findIndex(function (_ref2) {\n    var id = _ref2.id;\n    return id === idx;\n  });\n  var oldItem = cartItems[indxItem];\n  var newItem = updateItem(item, oldItem, numCount);\n  return _objectSpread({}, state, {\n    cart: {\n      cartItems: updateCartItem(cartItems, newItem, indxItem)\n    }\n  });\n};\nvar updateCartItem = function updateCartItem(cart, item, ind) {\n  if (item.count === 0) {\n    return [].concat(_toConsumableArray(cart.slice(0, ind)), _toConsumableArray(cart.slice(ind + 1)));\n  }\n  if (ind === -1) {\n    return [].concat(_toConsumableArray(cart), [item]);\n  }\n  return [].concat(_toConsumableArray(cart.slice(0, ind)), [item], _toConsumableArray(cart.slice(ind + 1)));\n};\nvar updateItem = function updateItem(item) {\n  var cartItem = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var numCount = arguments.length > 2 ? arguments[2] : undefined;\n  var _cartItem$id = cartItem.id,\n    id = _cartItem$id === void 0 ? item.id : _cartItem$id,\n    _cartItem$count = cartItem.count,\n    count = _cartItem$count === void 0 ? 0 : _cartItem$count,\n    _cartItem$title = cartItem.title,\n    title = _cartItem$title === void 0 ? item.title : _cartItem$title,\n    _cartItem$price = cartItem.price,\n    price = _cartItem$price === void 0 ? 0 : _cartItem$price;\n  return {\n    id: id,\n    title: title,\n    count: count + numCount,\n    price: price + numCount * item.price\n  };\n};\nvar reducer = function reducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : intitialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case \"ITEM_LOADED\":\n      return _objectSpread({}, state, {\n        items: {\n          allItem: action.payload,\n          loading: false\n        }\n      });\n    case \"ITEMS_LOADING\":\n      return _objectSpread({}, state, {\n        items: {\n          loading: true\n        }\n      });\n    case \"ADD_TO_CART\":\n      return updateCart(state, action.payload, 1);\n    case \"REMOVE_TO_CART\":\n      return updateCart(state, action.payload, -1);\n    case \"ALL_REMOVE_TO_CART\":\n      var item = state.cart.cartItems.find(function (_ref3) {\n        var id = _ref3.id;\n        return id === action.payload;\n      });\n      return updateCart(state, action.payload, -item.count);\n    default:\n      return state;\n  }\n};\nexport default reducer;","map":{"version":3,"names":["intitialState","items","allItem","loading","cart","cartItems","updateCart","state","idx","numCount","item","find","number","id","indxItem","findIndex","oldItem","newItem","updateItem","updateCartItem","ind","count","slice","cartItem","title","price","reducer","action","type","payload"],"sources":["/media/nadin/6d0c3e1f-d4db-40f2-ae9a-c32c3cff43d26/Работа/TestReat/13/shop/src/reducers/reducer.tsx"],"sourcesContent":["const intitialState = {\n  items: {\n    allItem: [],\n    loading: true,\n  },\n  cart: {\n    cartItems: [],\n  },\n};\nconst updateCart = (state: any, idx: number, numCount = 1) => {\n  const { cartItems } = state.cart;\n\n  const item = state.items.allItem.find(({ id: number }) => id === idx);\n  const indxItem = cartItems.findIndex(({ id }) => id === idx);\n  const oldItem = cartItems[indxItem];\n\n  const newItem = updateItem(item, oldItem, numCount);\n  return {\n    ...state,\n    cart: {\n      cartItems: updateCartItem(cartItems, newItem, indxItem),\n    },\n  };\n};\nconst updateCartItem = (cart, item, ind) => {\n  if (item.count === 0) {\n    return [...cart.slice(0, ind), ...cart.slice(ind + 1)];\n  }\n  if (ind === -1) {\n    return [...cart, item];\n  }\n  return [...cart.slice(0, ind), item, ...cart.slice(ind + 1)];\n};\nconst updateItem = (item, cartItem = {}, numCount) => {\n  const { id = item.id, count = 0, title = item.title, price = 0 } = cartItem;\n  return {\n    id,\n    title,\n    count: count + numCount,\n    price: price + numCount * item.price,\n  };\n};\n\nconst reducer = (state = intitialState, action) => {\n  switch (action.type) {\n    case \"ITEM_LOADED\":\n      return {\n        ...state,\n        items: {\n          allItem: action.payload,\n          loading: false,\n        },\n      };\n    case \"ITEMS_LOADING\":\n      return {\n        ...state,\n        items: {\n          loading: true,\n        },\n      };\n    case \"ADD_TO_CART\":\n      return updateCart(state, action.payload, 1);\n\n    case \"REMOVE_TO_CART\":\n      return updateCart(state, action.payload, -1);\n\n    case \"ALL_REMOVE_TO_CART\":\n      const item = state.cart.cartItems.find(({ id }) => id === action.payload);\n\n      return updateCart(state, action.payload, -item.count);\n\n    default:\n      return state;\n  }\n};\nexport default reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}