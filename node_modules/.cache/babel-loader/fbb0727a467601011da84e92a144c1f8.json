{"ast":null,"code":"import _toConsumableArray from \"/media/nadin/6d0c3e1f-d4db-40f2-ae9a-c32c3cff43d26/\\u0420\\u0430\\u0431\\u043E\\u0442\\u0430/TestReat/13/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/media/nadin/6d0c3e1f-d4db-40f2-ae9a-c32c3cff43d26/\\u0420\\u0430\\u0431\\u043E\\u0442\\u0430/TestReat/13/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar intitialState = {\n  items: {\n    allItem: [],\n    loading: true\n  },\n  cart: {\n    cartItems: []\n  }\n};\nvar updateCart = function updateCart(state, idx) {\n  var numCount = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n  var cartItems = state.cart.cartItems;\n  var item = state.items.allItem.find(function (_ref) {\n    var id = _ref.id;\n    return id === idx;\n  });\n  var indxItem = cartItems.findIndex(function (_ref2) {\n    var id = _ref2.id;\n    return id === idx;\n  });\n  var oldItem = cartItems[indxItem];\n  var newItem = updateItem(item, oldItem, numCount);\n  return _objectSpread({}, state, {\n    cart: {\n      cartItems: updateCartItem(cartItems, newItem, indxItem)\n    }\n  });\n};\nvar updateCartItem = function updateCartItem(cart, item, ind) {\n  if (item.count === 0) {\n    return [].concat(_toConsumableArray(cart.slice(0, ind)), _toConsumableArray(cart.slice(ind + 1)));\n  }\n  if (ind === -1) {\n    return [].concat(_toConsumableArray(cart), [item]);\n  }\n  return [].concat(_toConsumableArray(cart.slice(0, ind)), [item], _toConsumableArray(cart.slice(ind + 1)));\n};\nvar updateItem = function updateItem(item) {\n  var cartItem = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var numCount = arguments.length > 2 ? arguments[2] : undefined;\n  var _cartItem$id = cartItem.id,\n    id = _cartItem$id === void 0 ? item.id : _cartItem$id,\n    _cartItem$count = cartItem.count,\n    count = _cartItem$count === void 0 ? 0 : _cartItem$count,\n    _cartItem$title = cartItem.title,\n    title = _cartItem$title === void 0 ? item.title : _cartItem$title,\n    _cartItem$price = cartItem.price,\n    price = _cartItem$price === void 0 ? 0 : _cartItem$price;\n  return {\n    id: id,\n    title: title,\n    count: count + numCount,\n    price: price + numCount * item.price\n  };\n};\nvar reducer = function reducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : intitialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case 'ITEM_LOADED':\n      return _objectSpread({}, state, {\n        items: {\n          allItem: action.payload,\n          loading: false\n        }\n      });\n    case 'ITEMS_LOADING':\n      return _objectSpread({}, state, {\n        items: {\n          loading: true\n        }\n      });\n    case 'ADD_TO_CART':\n      return updateCart(state, action.payload, 1);\n    case 'REMOVE_TO_CART':\n      return updateCart(state, action.payload, -1);\n    case 'ALL_REMOVE_TO_CART':\n      var item = state.cart.cartItems.find(function (_ref3) {\n        var id = _ref3.id;\n        return id === action.payload;\n      });\n      return updateCart(state, action.payload, -item.count);\n    default:\n      return state;\n  }\n};\nexport default reducer;","map":{"version":3,"names":["intitialState","items","allItem","loading","cart","cartItems","updateCart","state","idx","numCount","item","find","id","indxItem","findIndex","oldItem","newItem","updateItem","updateCartItem","ind","count","slice","cartItem","title","price","reducer","action","type","payload"],"sources":["/media/nadin/6d0c3e1f-d4db-40f2-ae9a-c32c3cff43d26/Работа/TestReat/13/shop/src/reducers/reducer.tsx"],"sourcesContent":["const intitialState = {\n    items: {\n        allItem: [],\n        loading: true\n    },\n    cart: {\n        cartItems: []\n    }\n}\nconst updateCart = (state, idx, numCount = 1) => {\n    const { cartItems } = state.cart\n\n    const item = state.items.allItem.find(({ id }) => id === idx)\n    const indxItem = cartItems.findIndex(({ id }) => id === idx)\n    const oldItem = cartItems[indxItem]\n\n    const newItem = updateItem(item, oldItem, numCount)\n    return {\n        ...state,\n        cart: {\n            cartItems: updateCartItem(cartItems, newItem, indxItem)\n        }\n    }\n}\nconst updateCartItem = (cart, item, ind) => {\n\n    if (item.count === 0) {\n        return [\n            ...cart.slice(0, ind),\n            ...cart.slice(ind + 1)\n        ]\n    }\n    if (ind === -1) {\n        return [\n            ...cart,\n            item\n        ]\n    }\n    return [\n        ...cart.slice(0, ind),\n        item,\n        ...cart.slice(ind + 1)\n    ]\n\n}\nconst updateItem = (item, cartItem = {}, numCount) => {\n    const {\n        id = item.id,\n        count = 0,\n        title = item.title,\n        price = 0 } = cartItem\n    return {\n        id,\n        title,\n        count: count + numCount,\n        price: price + numCount * item.price\n    }\n}\n\nconst reducer = (state = intitialState, action) => {\n    switch (action.type) {\n        case 'ITEM_LOADED':\n            return {\n                ...state,\n                items: {\n                    allItem: action.payload,\n                    loading: false\n                }\n            }\n        case 'ITEMS_LOADING':\n            return {\n                ...state,\n                items: {\n                    loading: true\n                }\n            }\n        case 'ADD_TO_CART':\n            return updateCart(state, action.payload, 1)\n            \n        case 'REMOVE_TO_CART':\n            return updateCart(state, action.payload, -1)\n\n        case 'ALL_REMOVE_TO_CART':\n\n            const item = state.cart.cartItems.find(({ id }) => id === action.payload)\n\n            return updateCart(state, action.payload, -item.count)\n\n        default:\n            return state\n    }\n}\nexport default reducer"],"mappings":"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"},"metadata":{},"sourceType":"module"}