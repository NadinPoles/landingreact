{"ast":null,"code":"import { combineReducers } from \"redux\";\nfunction typedAction(type, payload) {\n  return {\n    type: type,\n    payload: payload\n  };\n}\nvar initialState = [];\nexport var addToCart = function addToCart(product) {\n  return typedAction(\"ADD_TO_CART\", product);\n};\nexport var removeFromCart = function removeFromCart(product) {\n  return typedAction(\"REMOVE_FROM_CART\", product);\n};\nexport var incrementQuantity = function incrementQuantity(product) {\n  return typedAction(\"INCREMENT_QUANTITY\", product);\n};\nexport var decrementQuantity = function decrementQuantity(product) {\n  return typedAction(\"DECREMENT_QUANTITY\", product);\n};\nexport var clearCart = function clearCart() {\n  return typedAction(\"CLEAR_CART\");\n};\nexport var clearCartOrder = function clearCartOrder() {\n  return typedAction(\"CLEAR_CARTORDER\");\n};\nexport function cartReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    /*case \"ADD_TO_CART\":\n      const itemInCart = state.cart.find(\n        (item) => item.id === action.payload.id\n      );\n      if (itemInCart) {\n        itemInCart.quantity++;\n        return { ...state };\n      } else {\n        return {\n          ...state,\n          cart: [...state.cart, { ...action.payload, quantity: 1 }],\n        };\n        // localStorage.setItem('token', payload);\n      }\n     case \"REMOVE_FROM_CART\":\n      if (window.confirm(\"Удалить товар?\")) {\n        return {\n          ...state,\n          cart: state.cart.filter((item) => item.id !== action.payload.id),\n        };\n      } else {\n        return { ...state };\n      }\n    case \"INCREMENT_QUANTITY\":\n      const item = state.cart.find((item) => item.id === action.payload.id);\n      if (item) {\n        item.quantity++;\n        return { ...state };\n      }\n      return state;\n    case \"DECREMENT_QUANTITY\":\n      const item_decr = state.cart.find(\n        (item) => item.id === action.payload.id\n      );\n      if (item_decr) {\n        if (item_decr.quantity == 1) {\n          item_decr.quantity = 1;\n        } else {\n          item_decr.quantity--;\n        }\n        return { ...state };\n      }\n      return state;\n    case \"CLEAR_CART\":\n      if (window.confirm(\"Очистить корзину?\")) {\n        // localStorage.removeItem('cart');\n        return {\n          ...state,\n          cart: [],\n        };\n      } else {\n        return { ...state };\n      }\n    case \"CLEAR_CARTORDER\":\n      return {\n        ...state,\n        cart: [],\n      };*/\n    default:\n      return state;\n  }\n}\nvar reducer = combineReducers({\n  cart2: cartReducer\n});\nexport default reducer;","map":{"version":3,"names":["combineReducers","typedAction","type","payload","initialState","addToCart","product","removeFromCart","incrementQuantity","decrementQuantity","clearCart","clearCartOrder","cartReducer","state","action","reducer","cart2"],"sources":["/media/nadin/6d0c3e1f-d4db-40f2-ae9a-c32c3cff43d26/Работа/TestReat/13/shop/src/redux/reducer.tsx"],"sourcesContent":["import { combineReducers } from \"redux\";\n\nfunction typedAction(type: string, payload?: any) {\n  return { type, payload };\n}\n\nexport type Product = {\n  id: number;\n  title: string;\n  price: number;\n  slug?: string;\n  image?: string;\n  new?: string;\n  recommend?: string;\n  popular?: string;\n};\n\ntype CartItem = {\n  id: number;\n  title: string;\n  quantity: number;\n  price: number;\n  image?: string;\n};\n\nexport type ProductState = CartItem[];\nconst initialState: ProductState = [];\n\nexport const addToCart = (product: Product) => {\n  return typedAction(\"ADD_TO_CART\", product);\n};\n\nexport const removeFromCart = (product: Product) => {\n  return typedAction(\"REMOVE_FROM_CART\", product);\n};\n\nexport const incrementQuantity = (product: Product) => {\n  return typedAction(\"INCREMENT_QUANTITY\", product);\n};\n\nexport const decrementQuantity = (product: Product) => {\n  return typedAction(\"DECREMENT_QUANTITY\", product);\n};\n\nexport const clearCart = () => {\n  return typedAction(\"CLEAR_CART\");\n};\n\nexport const clearCartOrder = () => {\n  return typedAction(\"CLEAR_CARTORDER\");\n};\n\ntype ProductAction = ReturnType<\n  | typeof addToCart\n  | typeof removeFromCart\n  | typeof incrementQuantity\n  | typeof decrementQuantity\n  | typeof clearCart\n  | typeof clearCartOrder\n>;\n\nexport function cartReducer(\n  state = initialState,\n  action: ProductAction\n): ProductState {\n  switch (action.type) {\n    /*case \"ADD_TO_CART\":\n      const itemInCart = state.cart.find(\n        (item) => item.id === action.payload.id\n      );\n      if (itemInCart) {\n        itemInCart.quantity++;\n        return { ...state };\n      } else {\n        return {\n          ...state,\n          cart: [...state.cart, { ...action.payload, quantity: 1 }],\n        };\n        // localStorage.setItem('token', payload);\n      }\n\n    case \"REMOVE_FROM_CART\":\n      if (window.confirm(\"Удалить товар?\")) {\n        return {\n          ...state,\n          cart: state.cart.filter((item) => item.id !== action.payload.id),\n        };\n      } else {\n        return { ...state };\n      }\n    case \"INCREMENT_QUANTITY\":\n      const item = state.cart.find((item) => item.id === action.payload.id);\n      if (item) {\n        item.quantity++;\n        return { ...state };\n      }\n      return state;\n    case \"DECREMENT_QUANTITY\":\n      const item_decr = state.cart.find(\n        (item) => item.id === action.payload.id\n      );\n      if (item_decr) {\n        if (item_decr.quantity == 1) {\n          item_decr.quantity = 1;\n        } else {\n          item_decr.quantity--;\n        }\n        return { ...state };\n      }\n      return state;\n    case \"CLEAR_CART\":\n      if (window.confirm(\"Очистить корзину?\")) {\n        // localStorage.removeItem('cart');\n        return {\n          ...state,\n          cart: [],\n        };\n      } else {\n        return { ...state };\n      }\n    case \"CLEAR_CARTORDER\":\n      return {\n        ...state,\n        cart: [],\n      };*/\n    default:\n      return state;\n  }\n}\n\nconst reducer = combineReducers({\n  cart2: cartReducer,\n});\n\nexport default reducer;\n"],"mappings":"AAAA,SAASA,eAAe,QAAQ,OAAO;AAEvC,SAASC,WAAW,CAACC,IAAY,EAAEC,OAAa,EAAE;EAChD,OAAO;IAAED,IAAI,EAAJA,IAAI;IAAEC,OAAO,EAAPA;EAAQ,CAAC;AAC1B;AAsBA,IAAMC,YAA0B,GAAG,EAAE;AAErC,OAAO,IAAMC,SAAS,GAAG,SAAZA,SAAS,CAAIC,OAAgB,EAAK;EAC7C,OAAOL,WAAW,CAAC,aAAa,EAAEK,OAAO,CAAC;AAC5C,CAAC;AAED,OAAO,IAAMC,cAAc,GAAG,SAAjBA,cAAc,CAAID,OAAgB,EAAK;EAClD,OAAOL,WAAW,CAAC,kBAAkB,EAAEK,OAAO,CAAC;AACjD,CAAC;AAED,OAAO,IAAME,iBAAiB,GAAG,SAApBA,iBAAiB,CAAIF,OAAgB,EAAK;EACrD,OAAOL,WAAW,CAAC,oBAAoB,EAAEK,OAAO,CAAC;AACnD,CAAC;AAED,OAAO,IAAMG,iBAAiB,GAAG,SAApBA,iBAAiB,CAAIH,OAAgB,EAAK;EACrD,OAAOL,WAAW,CAAC,oBAAoB,EAAEK,OAAO,CAAC;AACnD,CAAC;AAED,OAAO,IAAMI,SAAS,GAAG,SAAZA,SAAS,GAAS;EAC7B,OAAOT,WAAW,CAAC,YAAY,CAAC;AAClC,CAAC;AAED,OAAO,IAAMU,cAAc,GAAG,SAAjBA,cAAc,GAAS;EAClC,OAAOV,WAAW,CAAC,iBAAiB,CAAC;AACvC,CAAC;AAWD,OAAO,SAASW,WAAW,GAGX;EAAA,IAFdC,KAAK,uEAAGT,YAAY;EAAA,IACpBU,MAAqB;EAErB,QAAQA,MAAM,CAACZ,IAAI;IACjB;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IAEI;MACE,OAAOW,KAAK;EAAC;AAEnB;AAEA,IAAME,OAAO,GAAGf,eAAe,CAAC;EAC9BgB,KAAK,EAAEJ;AACT,CAAC,CAAC;AAEF,eAAeG,OAAO"},"metadata":{},"sourceType":"module"}