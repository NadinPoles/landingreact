{"ast":null,"code":"import _toConsumableArray from \"/media/nadin/6d0c3e1f-d4db-40f2-ae9a-c32c3cff43d26/\\u0420\\u0430\\u0431\\u043E\\u0442\\u0430/TestReat/13/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/media/nadin/6d0c3e1f-d4db-40f2-ae9a-c32c3cff43d26/\\u0420\\u0430\\u0431\\u043E\\u0442\\u0430/TestReat/13/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nfunction typedAction(type, payload) {\n  return {\n    type: type,\n    payload: payload\n  };\n}\nvar initialState = {\n  cart: []\n};\nexport var addToCart = function addToCart(product) {\n  return typedAction(\"ADD_TO_CART\", product);\n};\nexport var removeFromCart = function removeFromCart(product) {\n  return typedAction(\"REMOVE_FROM_CART\", product);\n};\nexport var incrementQuantity = function incrementQuantity(product) {\n  return typedAction(\"INCREMENT_QUANTITY\", product);\n};\nexport var decrementQuantity = function decrementQuantity(product) {\n  return typedAction(\"DECREMENT_QUANTITY\", product);\n};\nexport var clearCart = function clearCart(product) {\n  return typedAction(\"CLEAR_CART\", product);\n};\nexport default function reducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case \"ADD_TO_CART\":\n      var itemInCart = state.cart.find(function (item) {\n        return item.id === action.payload.id;\n      });\n      if (itemInCart) {\n        itemInCart.quantity++;\n        return state;\n      } else {\n        return _objectSpread({}, state, {\n          cart: [].concat(_toConsumableArray(state.cart), [_objectSpread({}, action.payload, {\n            quantity: 1\n          })])\n        });\n      }\n    case \"REMOVE_FROM_CART\":\n      return _objectSpread({}, state, {\n        cart: state.cart.filter(function (item) {\n          return item.id !== action.payload.id;\n        })\n      });\n    case \"INCREMENT_QUANTITY\":\n      var item = state.cart.find(function (item) {\n        return item.id === action.payload.id;\n      });\n      if (item) {\n        item.quantity++;\n        return _objectSpread({}, state);\n      }\n      return state;\n    case \"DECREMENT_QUANTITY\":\n      var item_decr = state.cart.find(function (item) {\n        return item.id === action.payload.id;\n      });\n      if (item_decr) {\n        if (item_decr.quantity == 1) {\n          item_decr.quantity = 1;\n        } else {\n          item_decr.quantity--;\n        }\n        return _objectSpread({}, state);\n      }\n      return state;\n    case \"CLEAR_CART\":\n      return _objectSpread({}, state, {\n        cart: []\n      });\n    default:\n      return state;\n  }\n}","map":{"version":3,"names":["typedAction","type","payload","initialState","cart","addToCart","product","removeFromCart","incrementQuantity","decrementQuantity","clearCart","reducer","state","action","itemInCart","find","item","id","quantity","filter","item_decr"],"sources":["/media/nadin/6d0c3e1f-d4db-40f2-ae9a-c32c3cff43d26/Работа/TestReat/13/shop/src/redux/reducer.tsx"],"sourcesContent":["function typedAction(type: string, payload?: any) {\n  return { type, payload };\n}\n\ntype Product = {\n  id: number;\n  title: string;\n  price: number;\n  image?: string;\n};\n\ntype CartItem = {\n  id: number;\n  title: string;\n  quantity: number;\n  price: number;\n  image?: string;\n};\n\nexport type ProductState = {\n  cart: CartItem[];\n};\n\nconst initialState: ProductState = {\n  cart: [],\n};\n\nexport const addToCart = (product: Product) => {\n  return typedAction(\"ADD_TO_CART\", product);\n};\n\nexport const removeFromCart = (product: Product) => {\n  return typedAction(\"REMOVE_FROM_CART\", product);\n};\n\nexport const incrementQuantity = (product: Product) => {\n  return typedAction(\"INCREMENT_QUANTITY\", product);\n};\n\nexport const decrementQuantity = (product: Product) => {\n  return typedAction(\"DECREMENT_QUANTITY\", product);\n};\n\nexport const clearCart = (product: Product) => {\n  return typedAction(\"CLEAR_CART\", product);\n};\n\ntype ProductAction = ReturnType<typeof addToCart | removeFromCart>;\n\nexport default function reducer(\n  state = initialState,\n  action: ProductAction\n): ProductState {\n  switch (action.type) {\n    case \"ADD_TO_CART\":\n      const itemInCart = state.cart.find(\n        (item) => item.id === action.payload.id\n      );\n      if (itemInCart) {\n        itemInCart.quantity++;\n        return state;\n      } else {\n        return {\n          ...state,\n          cart: [...state.cart, { ...action.payload, quantity: 1 }],\n        };\n      }\n\n    case \"REMOVE_FROM_CART\":\n      return {\n        ...state,\n        cart: state.cart.filter((item) => item.id !== action.payload.id),\n      };\n    case \"INCREMENT_QUANTITY\":\n      const item = state.cart.find((item) => item.id === action.payload.id);\n      if (item) {\n        item.quantity++;\n        return { ...state };\n      }\n      return state;\n    case \"DECREMENT_QUANTITY\":\n      const item_decr = state.cart.find(\n        (item) => item.id === action.payload.id\n      );\n      if (item_decr) {\n        if (item_decr.quantity == 1) {\n          item_decr.quantity = 1;\n        } else {\n          item_decr.quantity--;\n        }\n        return { ...state };\n      }\n      return state;\n    case \"CLEAR_CART\":\n      return {\n        ...state,\n        cart: [],\n      };\n    default:\n      return state;\n  }\n}\n"],"mappings":";;AAAA,SAASA,WAAW,CAACC,IAAY,EAAEC,OAAa,EAAE;EAChD,OAAO;IAAED,IAAI,EAAJA,IAAI;IAAEC,OAAO,EAAPA;EAAQ,CAAC;AAC1B;AAqBA,IAAMC,YAA0B,GAAG;EACjCC,IAAI,EAAE;AACR,CAAC;AAED,OAAO,IAAMC,SAAS,GAAG,SAAZA,SAAS,CAAIC,OAAgB,EAAK;EAC7C,OAAON,WAAW,CAAC,aAAa,EAAEM,OAAO,CAAC;AAC5C,CAAC;AAED,OAAO,IAAMC,cAAc,GAAG,SAAjBA,cAAc,CAAID,OAAgB,EAAK;EAClD,OAAON,WAAW,CAAC,kBAAkB,EAAEM,OAAO,CAAC;AACjD,CAAC;AAED,OAAO,IAAME,iBAAiB,GAAG,SAApBA,iBAAiB,CAAIF,OAAgB,EAAK;EACrD,OAAON,WAAW,CAAC,oBAAoB,EAAEM,OAAO,CAAC;AACnD,CAAC;AAED,OAAO,IAAMG,iBAAiB,GAAG,SAApBA,iBAAiB,CAAIH,OAAgB,EAAK;EACrD,OAAON,WAAW,CAAC,oBAAoB,EAAEM,OAAO,CAAC;AACnD,CAAC;AAED,OAAO,IAAMI,SAAS,GAAG,SAAZA,SAAS,CAAIJ,OAAgB,EAAK;EAC7C,OAAON,WAAW,CAAC,YAAY,EAAEM,OAAO,CAAC;AAC3C,CAAC;AAID,eAAe,SAASK,OAAO,GAGf;EAAA,IAFdC,KAAK,uEAAGT,YAAY;EAAA,IACpBU,MAAqB;EAErB,QAAQA,MAAM,CAACZ,IAAI;IACjB,KAAK,aAAa;MAChB,IAAMa,UAAU,GAAGF,KAAK,CAACR,IAAI,CAACW,IAAI,CAChC,UAACC,IAAI;QAAA,OAAKA,IAAI,CAACC,EAAE,KAAKJ,MAAM,CAACX,OAAO,CAACe,EAAE;MAAA,EACxC;MACD,IAAIH,UAAU,EAAE;QACdA,UAAU,CAACI,QAAQ,EAAE;QACrB,OAAON,KAAK;MACd,CAAC,MAAM;QACL,yBACKA,KAAK;UACRR,IAAI,+BAAMQ,KAAK,CAACR,IAAI,sBAAOS,MAAM,CAACX,OAAO;YAAEgB,QAAQ,EAAE;UAAC;QAAG;MAE7D;IAEF,KAAK,kBAAkB;MACrB,yBACKN,KAAK;QACRR,IAAI,EAAEQ,KAAK,CAACR,IAAI,CAACe,MAAM,CAAC,UAACH,IAAI;UAAA,OAAKA,IAAI,CAACC,EAAE,KAAKJ,MAAM,CAACX,OAAO,CAACe,EAAE;QAAA;MAAC;IAEpE,KAAK,oBAAoB;MACvB,IAAMD,IAAI,GAAGJ,KAAK,CAACR,IAAI,CAACW,IAAI,CAAC,UAACC,IAAI;QAAA,OAAKA,IAAI,CAACC,EAAE,KAAKJ,MAAM,CAACX,OAAO,CAACe,EAAE;MAAA,EAAC;MACrE,IAAID,IAAI,EAAE;QACRA,IAAI,CAACE,QAAQ,EAAE;QACf,yBAAYN,KAAK;MACnB;MACA,OAAOA,KAAK;IACd,KAAK,oBAAoB;MACvB,IAAMQ,SAAS,GAAGR,KAAK,CAACR,IAAI,CAACW,IAAI,CAC/B,UAACC,IAAI;QAAA,OAAKA,IAAI,CAACC,EAAE,KAAKJ,MAAM,CAACX,OAAO,CAACe,EAAE;MAAA,EACxC;MACD,IAAIG,SAAS,EAAE;QACb,IAAIA,SAAS,CAACF,QAAQ,IAAI,CAAC,EAAE;UAC3BE,SAAS,CAACF,QAAQ,GAAG,CAAC;QACxB,CAAC,MAAM;UACLE,SAAS,CAACF,QAAQ,EAAE;QACtB;QACA,yBAAYN,KAAK;MACnB;MACA,OAAOA,KAAK;IACd,KAAK,YAAY;MACf,yBACKA,KAAK;QACRR,IAAI,EAAE;MAAE;IAEZ;MACE,OAAOQ,KAAK;EAAC;AAEnB"},"metadata":{},"sourceType":"module"}